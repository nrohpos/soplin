<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Soplin Memories</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+Khmer:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg: #f3ede4;
        --dark: #1f1f1f;
        --accent: #b89b6a;
        --muted: #777;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: var(--bg);
        color: var(--dark);
        font-family: "Poppins", sans-serif;
        line-height: 1.7;
      }

      img {
        width: 100%;
        display: block;
      }

      /* ===== HEADER ===== */
      header {
        position: absolute;
        top: 0;
        width: 100%;
        padding: 25px 8%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        z-index: 10;
      }

      header nav a {
        margin-left: 25px;
        text-decoration: none;
        color: #fff;
        font-size: 0.8rem;
        letter-spacing: 2px;
      }

      header .logo img {
        width: 220px;
        height: auto;
      }

      @media (max-width: 900px) {
        header .logo img {
          width: 80px;
        }
      }
      .hero {
        height: 100vh;
        background: linear-gradient(
            rgba(205, 250, 233, 0.4),
            rgba(112, 224, 183, 0.4)
          ),
          url("hero.jpg") center/cover no-repeat;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        color: #fff;
        padding: 0 10%;
      }

      .hero h1 {
        font-family: "Poppins", sans-serif;
        font-size: 3rem;
        max-width: 800px;
        letter-spacing: 2px;
        margin-bottom: 30px;
      }

      .countdown {
        display: flex;
        justify-content: center;
        gap: 18px;
        margin-top: 30px;
      }

      .countdown div {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(8px);
        padding: 18px 16px;
        border-radius: 14px;
        min-width: 90px;
        text-align: center;
      }

      .countdown span {
        font-size: 2.2rem;
        font-weight: 600;
        letter-spacing: 1px;
        opacity: 1; /* remove old fade logic */
      }

      .countdown small {
        display: block;
        margin-top: 4px;
        font-size: 0.65rem;
        letter-spacing: 2px;
        opacity: 0.8;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(8px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .wedding-date {
        margin-top: 10px;
        font-size: 0.9rem;
        letter-spacing: 3px;
        opacity: 0.9;
      }

      section {
        padding: 90px 10%;
      }

      .two-col {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 50px;
        align-items: center;
      }

      h2 {
        font-family: "Poppins", sans-serif;
        font-size: 2rem;
        margin-bottom: 20px;
      }

      p {
        color: var(--muted);
        font-size: 0.95rem;
      }

      .btn {
        display: inline-block;
        margin-top: 20px;
        font-size: 0.75rem;
        letter-spacing: 2px;
        text-decoration: none;
        color: var(--dark);
        border-bottom: 1px solid var(--dark);
      }

      .category {
        display: grid;
        grid-template-columns: 1fr 1fr;
      }

      .cat-box {
        height: 350px;
        position: relative;
        background-size: cover;
        background-position: center;
      }

      .cat-box span {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
        font-family: "Poppins", sans-serif;
        font-size: 1.8rem;
        letter-spacing: 2px;
        background: rgba(0, 0, 0, 0.35);
      }

      .dark {
        background: #2a2a2a;
        color: #eee;
      }

      .dark p {
        color: #ccc;
      }

      .gallery-wrapper {
        position: relative;
        overflow-x: auto;
        overflow-y: hidden;
        padding-bottom: 10px;
        display: flex;
        justify-content: center;
      }

      .gallery-wrapper::-webkit-scrollbar {
        height: 6px;
      }

      .gallery-wrapper::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
      }

      .gallery {
        display: flex;
        gap: 20px;
        width: max-content;
        margin: 0 auto;
      }

      .gallery-item {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        min-width: 260px;
      }

      .gallery-item img {
        height: 160px;
        object-fit: cover;
        cursor: pointer;
        border-radius: 6px;
        transition: transform 0.4s ease, box-shadow 0.4s ease;
      }

      .gallery-item img:hover {
        transform: scale(1.05);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
      }

      .modal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.9);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 999;
      }

      .modal.active {
        display: flex;
      }

      .modal img {
        max-width: 90%;
        max-height: 90%;
      }

      footer {
        padding: 40px 10%;
        text-align: center;
        font-size: 0.8rem;
        background: #111;
        color: #aaa;
      }

      @media (max-width: 900px) {
        .two-col {
          grid-template-columns: 1fr;
        }

        .category {
          grid-template-columns: 1fr;
        }

        .hero h1 {
          font-size: 2.2rem;
        }

        header nav {
          display: none;
        }

        .countdown {
          gap: 15px;
        }

        .countdown div {
          border-radius: 50%;
          width: 80px;
          height: 80px;
          padding: 0;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
        }

        .countdown span {
          font-size: 1.4rem;
        }
      }

      .hero-quote {
        max-width: 900px;
        margin: 0 auto;
        text-align: center;
        color: #fff;
      }

      .hero-quote h1 {
        font-family: "Poppins", sans-serif; /* replace with Khmer font if you want */
        font-size: 2.8rem;
        font-weight: 500;
        line-height: 1.6;
        letter-spacing: 1px;
        margin-bottom: 25px;
      }

      .hero-quote h2 {
        font-size: 1.2rem;
        font-weight: 400;
        letter-spacing: 4px;
        opacity: 0.9;
      }

      .hero-quote h2 span {
        color: var(--accent);
        font-size: 1.4rem;
        margin: 0 6px;
      }

      @media (max-width: 768px) {
        .hero-quote h1 {
          font-size: 1.9rem;
        }

        .hero-quote h2 {
          font-size: 0.9rem;
          letter-spacing: 2px;
        }

        .gallery {
          animation-duration: 10s;
        }
      }

      .gallery-wrapper {
        overflow: hidden;
        position: relative;
      }

      .gallery {
        display: flex;
        gap: 44px;
        width: max-content;
        animation: scrollGallery 15s linear infinite;
      }

      .gallery-wrapper:hover .gallery {
        animation-play-state: paused;
      }

      @keyframes scrollGallery {
        from {
          transform: translateX(0);
        }
        to {
          transform: translateX(-50%);
        }
      }
      .km-quote {
        font-family: "Noto Sans Khmer", "Battambang", "Hanuman", sans-serif;
        white-space: pre-wrap;
      }

      .km-quote .w {
        display: inline-block;
        opacity: 0;
        transform: translateY(10px);
        animation: wordIn 0.6s ease forwards;
      }

      @keyframes wordIn {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes charFade {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes tick {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.08);
        }
        100% {
          transform: scale(1);
        }
      }

      .countdown span.tick {
        animation: tick 0.4s ease;
      }

      .reveal {
        opacity: 0;
        transform: translateY(30px) scale(0.97);
        transition: opacity 1s ease, transform 1s ease, box-shadow 1s ease;
        border-radius: 20px;
        overflow: hidden;
      }

      .reveal.show {
        opacity: 1;
        transform: translateY(0) scale(1);
        box-shadow: 0 20px 45px rgba(0, 0, 0, 0.18),
          0 0 0 1px rgba(255, 255, 255, 0.15);
      }
      .reveal.show::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 20px;
        pointer-events: none;
        background: linear-gradient(
          120deg,
          rgba(255, 255, 255, 0.15),
          rgba(255, 255, 255, 0)
        );
      }
      .reveal.show:hover {
        transform: translateY(-4px) scale(1.02);
        box-shadow: 0 30px 65px rgba(0, 0, 0, 0.22);
      }
      @media (max-width: 768px) {
        .reveal {
          border-radius: 14px;
        }
      }
    </style>
  </head>

  <body>
    <header>
      <div class="logo">
        <img src="/assests/logo/logo.png" />
      </div>
    </header>

    <div class="hero">
      <div>
        <div class="hero-quote">
          <h1 id="animatedText" class="km-quote">
            “ពីមនុស្សពីរនាក់ ក្លាយជាជីវិត្តមនុស្សតែម្នាក់ ក្រោមវាសនា
            និងសេចក្ដីស្រឡាញ់កើតចេញពីចិត្ត តែមួយ”
          </h1>
          <h2>~ អៀង ទិត្យសោភ័ណ្ឌ <span>&</span> វុន ដាលីន ~</h2>
        </div>
        <div class="countdown">
          <div><span id="days">00</span><small>DAYS</small></div>
          <div><span id="hours">00</span><small>HOURS</small></div>
          <div><span id="minutes">00</span><small>MINUTES</small></div>
          <div><span id="seconds">00</span><small>SECONDS</small></div>
        </div>
        <p class="wedding-date" id="weddingMessage">26 June 2026</p>
        <audio id="bgMusic" src="music.mp3" loop></audio>
      </div>
    </div>

    <!-- ===== INTRO ===== -->
    <section class="two-col">
      <img
        src="assests/collections/img_collection_2.jpg"
        alt="Story"
        class="reveal"
      />
      <div>
        <h2>Every Moment Matters</h2>
        <p>
          Life moves quickly, but memories last forever. From pre-wedding smiles
          to the joy of your wedding day, we believe in preserving moments
          filled with love, connection, and authenticity.
        </p>
        <a href="#" class="btn">LEARN MORE →</a>
      </div>
    </section>

    <!-- ===== CATEGORY ===== -->
    <div class="category">
      <div class="cat-box" style="background-image: url('prewedding.jpg')">
        <span>PRE-WEDDING</span>
      </div>
      <div class="cat-box" style="background-image: url('wedding.jpg')">
        <span>WEDDING</span>
      </div>
    </div>

    <!-- ===== DARK STORY ===== -->
    <section class="dark two-col">
      <div>
        <h2>Let Us Tell Your Story</h2>
        <p>
          Your journey is unique. We focus on real emotions, real laughter, and
          real connections. Our goal is to help you relive these moments every
          time you look back.
        </p>
        <a href="#" class="btn" style="color: #fff; border-color: #fff"
          >LEARN MORE →</a
        >
      </div>
      <img src="couple.jpg" alt="Couple" />
    </section>

    <!-- ===== GALLERY ===== -->
    <section>
      <h2 style="text-align: center; margin-bottom: 40px">
        Memories Collection
      </h2>
      <div class="gallery-wrapper">
        <div class="gallery" id="gallery"></div>
      </div>
    </section>

    <!-- ===== MODAL ===== -->
    <div class="modal" id="modal">
      <img id="modalImg" />
    </div>

    <!-- ===== FOOTER ===== -->
    <footer>© 2026 Wedding & Pre-Wedding Memories · Crafted with Love</footer>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("show");
              } else {
                entry.target.classList.remove("show");
              }
            });
          },
          {
            threshold: 0.35,
            rootMargin: "0px 0px -10% 0px", // smoother trigger
          }
        );

        function observeReveals() {
          document.querySelectorAll(".reveal").forEach((el) => {
            observer.observe(el);
          });
        }

        observeReveals();

        // expose for dynamically added images
        window.observeReveals = observeReveals;
      });
      /* ===== QOUTE ANIMATE ===== */
      const el = document.getElementById("animatedText");
      const raw = el.textContent;
      el.textContent = "";

      const seg =
        "Segmenter" in Intl
          ? new Intl.Segmenter("km", { granularity: "word" })
          : null;

      const parts = seg
        ? Array.from(seg.segment(raw), (s) => s.segment)
        : raw.split(/(\s+)/); // fallback

      let delayIndex = 0;

      parts.forEach((part) => {
        if (part === "\n") {
          el.appendChild(document.createElement("br"));
          return;
        }

        // keep spaces as normal (don’t animate)
        if (/^\s+$/.test(part)) {
          el.appendChild(document.createTextNode(part));
          return;
        }

        const span = document.createElement("span");
        span.className = "w";
        span.textContent = part;
        span.style.animationDelay = `${delayIndex * 0.08}s`; // speed
        el.appendChild(span);

        delayIndex++;
      });
      /* ===== IMAGE MODAL ===== */
      const modal = document.getElementById("modal");
      const modalImg = document.getElementById("modalImg");

      document.querySelectorAll(".gallery img").forEach((img) => {
        img.onclick = () => {
          modal.classList.add("active");
          modalImg.src = img.src;
        };
      });

      modal.onclick = () => modal.classList.remove("active");

      /* ===== COUNTDOWN TIMER ===== */
      // Cambodia timezone (UTC+7)
      const weddingDate = new Date("2026-06-26T00:00:00+07:00").getTime();

      const daysEl = document.getElementById("days");
      const hoursEl = document.getElementById("hours");
      const minutesEl = document.getElementById("minutes");
      const secondsEl = document.getElementById("seconds");
      const messageEl = document.getElementById("weddingMessage");
      const musicEl = document.getElementById("bgMusic");

      function updateCountdown() {
        const now = Date.now();
        const distance = weddingDate - now;

        if (distance <= 0) {
          document.querySelector(".countdown").style.display = "none";
          messageEl.textContent = "❤️ We’re getting married! ❤️";
          messageEl.style.fontSize = "1.2rem";
          if (musicEl) musicEl.play().catch(() => {});
          clearInterval(timer);
          return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor(
          (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
        );
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        daysEl.textContent = days;
        hoursEl.textContent = String(hours).padStart(2, "0");
        minutesEl.textContent = String(minutes).padStart(2, "0");
        secondsEl.textContent = String(seconds).padStart(2, "0");

        // Animate only when value changes
        const pairs = [
          [daysEl, days],
          [hoursEl, hours],
          [minutesEl, minutes],
          [secondsEl, seconds],
        ];

        pairs.forEach(([el, val]) => {
          if (el.textContent !== String(val).padStart(2, "0")) {
            el.textContent = String(val).padStart(2, "0");
            el.style.animation = "none";
            el.offsetHeight; // reflow
            el.style.animation = "fadeIn 0.5s ease forwards";
          }
        });
      }

      updateCountdown();
      const timer = setInterval(updateCountdown, 1000);

      /* ===== Gallery Load Image ===== */

      async function loadGallery() {
        const gallery = document.getElementById("gallery");
        const imageFolder = "/assests/collections/";
        const imagesPerGroup = 2;
        const res = await fetch("/assests/manifest.json");
        const data = await res.json();

        for (let i = 0; i < data.images.length; i += imagesPerGroup) {
          const group = document.createElement("div");
          group.className = "gallery-item";

          data.images.slice(i, i + imagesPerGroup).forEach((file) => {
            const img = document.createElement("img");
            img.src = imageFolder + file;
            img.loading = "lazy";

            img.onclick = () => {
              modal.classList.add("active");
              modalImg.src = img.src;
            };

            group.appendChild(img);
          });

          gallery.appendChild(group);
        }
      }
      loadGallery();

      // Close modal
      modal.addEventListener("click", () => modal.classList.remove("active"));
    </script>
  </body>
</html>
